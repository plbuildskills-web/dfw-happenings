<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DFW Happenings</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <!-- Firebase libraries -->
    <script src="https://www.gstatic.com/firebasejs/9.2.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.2.0/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.2.0/firebase-firestore-compat.js"></script>

    <style>
        body { font-family: 'Inter', sans-serif; }
    </style>
</head>
<body class="bg-gray-100 text-gray-900 dark:bg-gray-900 dark:text-white transition-colors duration-300">
    <div id="root" class="min-h-screen flex flex-col"></div>

    <script type="text/babel">
        const { useState, useEffect } = React;
        const rootElement = document.getElementById('root');

        const App = () => {
            const [activeTab, setActiveTab] = useState('home');
            const [isDarkMode, setIsDarkMode] = useState(false);
            const [zipCode, setZipCode] = useState('');
            const [promotions, setPromotions] = useState([]);
            const [promoForm, setPromoForm] = useState({ businessName: '', eventName: '', tier: '24hr' });
            const [isPromoSubmitted, setIsPromoSubmitted] = useState(false);
            const [chatHistory, setChatHistory] = useState([]);
            const [chatInput, setChatInput] = useState('');
            const [isChatTyping, setIsChatTyping] = useState(false);
            const [userId, setUserId] = useState(null);
            const [db, setDb] = useState(null);
            const [auth, setAuth] = useState(null);
            const [selectedCategory, setSelectedCategory] = useState(null);

            // Hardcoded event data for demonstration
            const hardcodedEvents = [
                { id: 1, name: "Dallas Farmers Market", time: "Every Saturday, 9am - 5pm", location: "1010 S Pearl Expy, Dallas, TX 75201", cost: "Free", category: "Food & Drink" },
                { id: 2, name: "Concert at The Factory", time: "Oct 26, 7pm", location: "2710 N Stemmons Fwy, Dallas, TX 75207", cost: "Paid", category: "Concerts" },
                { id: 3, name: "Kids' Craft Day", time: "Oct 29, 2pm - 4pm", location: "Dallas Public Library", cost: "Free", category: "Kid-Friendly" },
                { id: 4, name: "Happy Hour at Happiest Hour", time: "Daily, 4pm - 6pm", location: "2616 Olive St, Dallas, TX 75201", cost: "Free", category: "Nightlife" },
                { id: 5, name: "Art Pop-Up in Deep Ellum", time: "Nov 3, 12pm - 5pm", location: "Deep Ellum Arts Co.", cost: "Free", category: "Pop-Ups" },
            ];

            // Theme colors
            const primary = '#212B45'; // Navy
            const secondary = '#00ADB5'; // Teal
            const accent = '#FF9D00'; // Orange

            // Firebase Initialization & Authentication
            useEffect(() => {
                try {
                    const firebaseConfig = typeof __firebase_config !== 'undefined' ? JSON.parse(__firebase_config) : {};
                    const app = firebase.initializeApp(firebaseConfig);
                    const firestoreDb = app.firestore();
                    const firebaseAuth = app.auth();
                    setDb(firestoreDb);
                    setAuth(firebaseAuth);

                    // Sign in user using the provided custom token or anonymously
                    if (typeof __initial_auth_token !== 'undefined') {
                        firebaseAuth.signInWithCustomToken(__initial_auth_token);
                    } else {
                        firebaseAuth.signInAnonymously();
                    }

                    // This variable will hold the unsubscribe function for Firestore
                    let promotionsUnsubscribe = () => {};

                    // Set up a listener for authentication state changes
                    const authUnsubscribe = firebaseAuth.onAuthStateChanged((user) => {
                        // First, clean up the old promotions listener if it exists
                        promotionsUnsubscribe();

                        if (user) {
                            setUserId(user.uid);
                            console.log('User logged in with ID:', user.uid);

                            // Set up the listener for promotions only after a user is authenticated
                            const appId = typeof __app_id !== 'undefined' ? __app_id : 'default-app-id';
                            const promoCollectionRef = firestoreDb.collection(`artifacts/${appId}/public/data/promotions`);
                            const q = promoCollectionRef.orderBy("createdAt", "desc");

                            promotionsUnsubscribe = q.onSnapshot((snapshot) => {
                                const promotionsData = snapshot.docs.map(doc => ({
                                    id: doc.id,
                                    ...doc.data()
                                }));
                                setPromotions(promotionsData);
                            }, (error) => {
                                console.error("Error fetching promotions: ", error);
                            });
                        } else {
                            console.log('User is logged out.');
                            setUserId(null);
                            setPromotions([]);
                        }
                    });

                    // Cleanup function for the main effect
                    return () => {
                        authUnsubscribe();
                        promotionsUnsubscribe();
                    };
                } catch (e) {
                    console.error("Error with Firebase configuration or authentication:", e);
                }
            }, []);

            const handlePromoSubmit = async (e) => {
                e.preventDefault();
                if (!db) {
                    console.error("Firestore not initialized.");
                    return;
                }
                if (!promoForm.businessName || !promoForm.eventName) {
                    console.error("Business name and event name are required.");
                    return;
                }

                const appId = typeof __app_id !== 'undefined' ? __app_id : 'default-app-id';
                try {
                    await db.collection(`artifacts/${appId}/public/data/promotions`).add({
                        ...promoForm,
                        createdAt: firebase.firestore.FieldValue.serverTimestamp(),
                        expiresAt: new Date(new Date().getTime() + (promoForm.tier === '24hr' ? 24 : promoForm.tier === '3-day' ? 72 : 168) * 60 * 60 * 1000),
                        is_paid: true,
                    });
                    setIsPromoSubmitted(true);
                    setPromoForm({ businessName: '', eventName: '', tier: '24hr' });
                    setTimeout(() => setIsPromoSubmitted(false), 3000);
                } catch (e) {
                    console.error("Error adding document: ", e);
                }
            };

            const handleChatSubmit = async (e) => {
                e.preventDefault();
                const userPrompt = chatInput.trim();
                if (!userPrompt) return;

                setChatHistory(prev => [...prev, { role: 'user', text: userPrompt }]);
                setChatInput('');
                setIsChatTyping(true);

                const payload = {
                    contents: [{ parts: [{ text: userPrompt }] }],
                    model: "gemini-2.5-flash-preview-05-20",
                };

                const apiKey = "";
                const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-05-20:generateContent?key=${apiKey}`;

                try {
                    let retryCount = 0;
                    const maxRetries = 3;
                    let response;
                    while (retryCount < maxRetries) {
                        response = await fetch(apiUrl, {
                            method: 'POST',
                            headers: { 'Content-Type': 'application/json' },
                            body: JSON.stringify(payload)
                        });
                        if (response.status !== 429) {
                            break;
                        }
                        retryCount++;
                        await new Promise(res => setTimeout(res, 2 ** retryCount * 1000));
                    }

                    if (!response.ok) throw new Error(`API call failed with status: ${response.status}`);

                    const result = await response.json();
                    const botResponse = result.candidates?.[0]?.content?.parts?.[0]?.text || 'Sorry, I couldn\'t generate a response.';
                    setChatHistory(prev => [...prev, { role: 'bot', text: botResponse }]);

                } catch (error) {
                    console.error('Error with chatbot API:', error);
                    setChatHistory(prev => [...prev, { role: 'bot', text: 'Sorry, something went wrong. Please try again later.' }]);
                } finally {
                    setIsChatTyping(false);
                }
            };

            const handleCategoryClick = (category) => {
                if (selectedCategory === category) {
                    setSelectedCategory(null);
                } else {
                    setSelectedCategory(category);
                }
                setActiveTab('events');
            };

            const filteredEvents = selectedCategory
                ? hardcodedEvents.filter(event => event.category === selectedCategory)
                : hardcodedEvents;

            const renderContent = () => {
                switch (activeTab) {
                    case 'home':
                        return (
                            <div className="p-4 space-y-6">
                                <div className="text-center">
                                    <h1 className="text-3xl font-bold mb-2">DFW Happenings</h1>
                                    <p className="text-sm opacity-80">Discover events, nightlife, and more in the DFW area.</p>
                                </div>
                                <div className="relative">
                                    <input
                                        type="text"
                                        placeholder="Enter your ZIP code"
                                        value={zipCode}
                                        onChange={(e) => setZipCode(e.target.value)}
                                        className={`w-full p-3 rounded-xl focus:outline-none focus:ring-2 transition-all duration-300 ${isDarkMode ? 'bg-gray-700 text-white placeholder-gray-400 focus:ring-teal-400' : 'bg-gray-200 text-gray-800 placeholder-gray-500 focus:ring-teal-600'}`}
                                    />
                                    <div className="absolute inset-y-0 right-0 flex items-center pr-3 pointer-events-none">
                                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" className={`w-6 h-6 ${isDarkMode ? 'text-gray-400' : 'text-gray-500'}`}>
                                            <path fillRule="evenodd" d="M11.54 22.351A2.457 2.457 0 0 1 9.771 21H3.75a.75.75 0 0 1-.75-.75V4.5a.75.75 0 0 1 .75-.75h14.25a.75.75 0 0 1 .75.75v10.351c0 .48.113.948.337 1.372l-4.596 5.155a1.5 1.5 0 0 1-2.006.275ZM13.064 16.5H18a.75.75 0 0 0 .75-.75V4.5h-15V15h5.436c.146.467.351.91.614 1.328Zm9.41-5.836a.75.75 0 0 1 .174 1.054L21.05 14.814a.75.75 0 0 1-.954.12l-2.657-2.316a.75.75 0 1 1 .954-1.12l2.657 2.316a.75.75 0 0 1 1.126-.174Z" clipRule="evenodd" />
                                            <path d="M12.75 12a1.5 1.5 0 1 0 0-3 1.5 1.5 0 0 0 0 3Z" />
                                        </svg>
                                    </div>
                                </div>
                                <div className="grid grid-cols-2 gap-2 text-center">
                                    {['Kid-Friendly', 'Concerts', 'Nightlife', 'Food & Drink', 'Pop-Ups', 'Free Events'].map(category => (
                                        <button
                                            key={category}
                                            onClick={() => handleCategoryClick(category)}
                                            className={`p-3 rounded-xl text-sm font-semibold transition-all duration-300 ${isDarkMode ? 'bg-gray-700 text-white hover:bg-teal-600' : 'bg-gray-200 text-gray-800 hover:bg-teal-300'} ${selectedCategory === category ? 'ring-2 ring-orange-500 scale-105' : ''}`}
                                        >
                                            {category}
                                        </button>
                                    ))}
                                </div>
                            </div>
                        );

                    case 'events':
                        return (
                            <div className="p-4 space-y-4">
                                <h2 className="text-2xl font-bold mb-4 text-center">
                                    {selectedCategory ? `${selectedCategory} Events` : 'All Upcoming Events'}
                                </h2>
                                {filteredEvents.length > 0 ? (
                                    filteredEvents.map(event => (
                                        <div key={event.id} className={`rounded-xl p-4 shadow-lg border-b-4 border-teal-500 hover:scale-105 transition-transform duration-300 ${isDarkMode ? 'bg-gray-800' : 'bg-white'}`}>
                                            <h3 className={`text-xl font-semibold ${isDarkMode ? 'text-teal-300' : 'text-teal-600'}`}>{event.name}</h3>
                                            <p className={`text-sm mt-1 ${isDarkMode ? 'opacity-80' : 'opacity-70'}`}>{event.time}</p>
                                            <p className={`text-sm ${isDarkMode ? 'opacity-60' : 'opacity-50'}`}>{event.location}</p>
                                            <div className="mt-2 text-xs font-semibold uppercase">
                                                <span className={`px-2 py-1 rounded-full ${event.cost === 'Free' ? 'bg-green-500 text-white' : 'bg-orange-500 text-white'}`}>
                                                    {event.cost}
                                                </span>
                                                <span className="ml-2 px-2 py-1 rounded-full bg-blue-500 text-white">
                                                    {event.category}
                                                </span>
                                            </div>
                                        </div>
                                    ))
                                ) : (
                                    <p className="text-center italic opacity-60">No events found for this category.</p>
                                )}
                                <p className={`text-center text-sm italic mt-6 ${isDarkMode ? 'opacity-60' : 'opacity-50'}`}>
                                    Note: This is a demo. In a real app, events would be pulled from live APIs.
                                </p>
                            </div>
                        );

                    case 'promo':
                        return (
                            <div className="p-4 space-y-6">
                                <h2 className="text-2xl font-bold text-center">Promote Your Business</h2>
                                <form onSubmit={handlePromoSubmit} className={`p-6 rounded-xl shadow-lg space-y-4 ${isDarkMode ? 'bg-gray-800' : 'bg-white'}`}>
                                    <h3 className={`text-xl font-semibold text-center ${isDarkMode ? 'text-teal-300' : 'text-teal-600'}`}>Submit a Promotion</h3>
                                    <div>
                                        <label className={`block text-sm font-medium mb-1 ${isDarkMode ? '' : 'text-gray-800'}`}>Business/Event Name</label>
                                        <input
                                            type="text"
                                            value={promoForm.businessName}
                                            onChange={(e) => setPromoForm({ ...promoForm, businessName: e.target.value })}
                                            className={`w-full p-3 rounded-lg focus:outline-none focus:ring-2 ${isDarkMode ? 'bg-gray-700 text-white focus:ring-teal-400' : 'bg-gray-200 text-gray-800 focus:ring-teal-600'}`}
                                            required
                                        />
                                    </div>
                                    <div>
                                        <label className={`block text-sm font-medium mb-1 ${isDarkMode ? '' : 'text-gray-800'}`}>Event Description</label>
                                        <textarea
                                            value={promoForm.eventName}
                                            onChange={(e) => setPromoForm({ ...promoForm, eventName: e.target.value })}
                                            className={`w-full p-3 rounded-lg focus:outline-none focus:ring-2 ${isDarkMode ? 'bg-gray-700 text-white focus:ring-teal-400' : 'bg-gray-200 text-gray-800 focus:ring-teal-600'}`}
                                            rows="3"
                                            required
                                        />
                                    </div>
                                    <div>
                                        <label className={`block text-sm font-medium mb-1 ${isDarkMode ? '' : 'text-gray-800'}`}>Promo Tier</label>
                                        <select
                                            value={promoForm.tier}
                                            onChange={(e) => setPromoForm({ ...promoForm, tier: e.target.value })}
                                            className={`w-full p-3 rounded-lg focus:outline-none focus:ring-2 ${isDarkMode ? 'bg-gray-700 text-white focus:ring-teal-400' : 'bg-gray-200 text-gray-800 focus:ring-teal-600'}`}
                                        >
                                            <option value="24hr">24 Hour Feature</option>
                                            <option value="3-day">3-Day Feature</option>
                                            <option value="1-week">1-Week Feature</option>
                                        </select>
                                    </div>
                                    <button
                                        type="submit"
                                        className="w-full p-3 mt-4 bg-orange-500 text-white rounded-lg font-bold hover:bg-orange-600 transition-all duration-300"
                                    >
                                        Submit & Pay (Simulated)
                                    </button>
                                    {isPromoSubmitted && (
                                        <p className="text-green-400 text-center font-semibold mt-2">
                                            Promotion submitted successfully!
                                        </p>
                                    )}
                                </form>
                                <div className="space-y-4">
                                    <h3 className="text-xl font-semibold text-center">Featured Promotions ({promotions.length})</h3>
                                    {promotions.map(promo => (
                                        <div key={promo.id} className={`p-4 rounded-xl border-b-4 border-orange-500 ${isDarkMode ? 'bg-gray-800' : 'bg-white'}`}>
                                            <h4 className={`text-lg font-semibold ${isDarkMode ? 'text-orange-400' : 'text-orange-600'}`}>{promo.businessName}</h4>
                                            <p className={`mt-1 ${isDarkMode ? 'opacity-80' : 'opacity-70'}`}>{promo.eventName}</p>
                                            <div className={`flex justify-between items-center text-sm mt-2 ${isDarkMode ? 'opacity-60' : 'opacity-50'}`}>
                                                <span>Tier: {promo.tier}</span>
                                                <span>Submitted: {promo.createdAt ? new Date(promo.createdAt.seconds * 1000).toLocaleDateString() : 'N/A'}</span>
                                            </div>
                                        </div>
                                    ))}
                                    {promotions.length === 0 && (
                                        <p className={`text-center italic ${isDarkMode ? 'opacity-60' : 'opacity-50'}`}>No promotions currently featured.</p>
                                    )}
                                </div>
                                 <p className={`text-xs text-center ${isDarkMode ? 'opacity-40' : 'opacity-30'}`}>Your userId is: {userId}</p>
                            </div>
                        );

                    case 'chatbot':
                        return (
                            <div className="flex flex-col h-full">
                                <div className="flex-grow p-4 overflow-y-auto space-y-4">
                                    {chatHistory.map((msg, index) => (
                                        <div key={index} className={`flex ${msg.role === 'user' ? 'justify-end' : 'justify-start'}`}>
                                            <div className={`p-3 rounded-2xl max-w-[80%] ${msg.role === 'user' ? 'bg-teal-600 text-white rounded-br-none' : isDarkMode ? 'bg-gray-700 text-white rounded-bl-none' : 'bg-gray-200 text-gray-800 rounded-bl-none'}`}>
                                                {msg.text}
                                            </div>
                                        </div>
                                    ))}
                                    {isChatTyping && (
                                        <div className="flex justify-start">
                                            <div className={`p-3 rounded-2xl rounded-bl-none max-w-[80%] ${isDarkMode ? 'bg-gray-700 text-white' : 'bg-gray-200 text-gray-800'}`}>
                                                <div className="animate-pulse">...</div>
                                            </div>
                                        </div>
                                    )}
                                </div>
                                <form onSubmit={handleChatSubmit} className={`flex p-4 border-t ${isDarkMode ? 'bg-gray-900 border-gray-700' : 'bg-white border-gray-200'}`}>
                                    <input
                                        type="text"
                                        value={chatInput}
                                        onChange={(e) => setChatInput(e.target.value)}
                                        placeholder="Ask about events..."
                                        className={`flex-grow p-3 rounded-full focus:outline-none ${isDarkMode ? 'bg-gray-800 text-white placeholder-gray-400' : 'bg-gray-200 text-gray-800 placeholder-gray-500'}`}
                                    />
                                    <button
                                        type="submit"
                                        className="ml-2 p-3 bg-teal-600 text-white rounded-full hover:bg-teal-700 transition-colors duration-300"
                                        aria-label="Send message"
                                    >
                                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" className="w-6 h-6">
                                            <path d="M3.478 2.405a.75.75 0 0 0-.926.94l2.432 7.917H13.5a.75.75 0 0 1 0 1.5H4.984l-2.432 7.917a.75.75 0 0 0 .926.94 60.599 60.599 0 0 0 18.445-8.852.75.75 0 0 0 0-1.284A60.599 60.599 0 0 0 3.478 2.405Z" />
                                        </svg>
                                    </button>
                                </form>
                            </div>
                        );

                    case 'contact':
                        return (
                            <div className="p-4 space-y-6">
                                <h2 className="text-2xl font-bold text-center">Contact Us</h2>
                                <form className={`p-6 rounded-xl shadow-lg space-y-4 ${isDarkMode ? 'bg-gray-800' : 'bg-white'}`}>
                                    <div>
                                        <label className={`block text-sm font-medium mb-1 ${isDarkMode ? '' : 'text-gray-800'}`}>Your Name</label>
                                        <input type="text" className={`w-full p-3 rounded-lg focus:outline-none focus:ring-2 ${isDarkMode ? 'bg-gray-700 text-white focus:ring-teal-400' : 'bg-gray-200 text-gray-800 focus:ring-teal-600'}`} />
                                    </div>
                                    <div>
                                        <label className={`block text-sm font-medium mb-1 ${isDarkMode ? '' : 'text-gray-800'}`}>Your Email</label>
                                        <input type="email" className={`w-full p-3 rounded-lg focus:outline-none focus:ring-2 ${isDarkMode ? 'bg-gray-700 text-white focus:ring-teal-400' : 'bg-gray-200 text-gray-800 focus:ring-teal-600'}`} />
                                    </div>
                                    <div>
                                        <label className={`block text-sm font-medium mb-1 ${isDarkMode ? '' : 'text-gray-800'}`}>Message</label>
                                        <textarea className={`w-full p-3 rounded-lg focus:outline-none focus:ring-2 ${isDarkMode ? 'bg-gray-700 text-white focus:ring-teal-400' : 'bg-gray-200 text-gray-800 focus:ring-teal-600'}`} rows="4"></textarea>
                                    </div>
                                    <button
                                        type="button"
                                        onClick={() => {
                                            console.log("Contact form submitted (simulated)");
                                        }}
                                        className="w-full p-3 mt-4 bg-orange-500 text-white rounded-lg font-bold hover:bg-orange-600 transition-all duration-300"
                                    >
                                        Send Message
                                    </button>
                                    <p className={`text-center text-sm mt-4 ${isDarkMode ? 'opacity-60' : 'opacity-50'}`}>
                                        You can also email us directly at: <br /><a href="mailto:simplycellaaa@gmail.com" className={`underline ${isDarkMode ? 'text-teal-400' : 'text-teal-600'}`}>simplycellaaa@gmail.com</a>
                                    </p>
                                </form>
                            </div>
                        );

                    default:
                        return null;
                }
            };

            const toggleDarkMode = () => {
                const newIsDarkMode = !isDarkMode;
                setIsDarkMode(newIsDarkMode);
                document.documentElement.classList.toggle('dark', newIsDarkMode);
            };

            return (
                <div className={`min-h-screen flex flex-col font-sans ${isDarkMode ? 'dark' : ''}`}>
                    <div className="flex-grow max-w-lg mx-auto w-full relative overflow-hidden">
                        <div className="absolute top-4 right-4 z-10">
                            <button
                                onClick={toggleDarkMode}
                                className="p-2 rounded-full bg-gray-800/50 backdrop-blur-md text-white shadow-lg focus:outline-none focus:ring-2 focus:ring-teal-400 transition-colors duration-300"
                                aria-label="Toggle dark mode"
                            >
                                {isDarkMode ? (
                                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" className="w-6 h-6 text-orange-300">
                                        <path d="M12 2.25a.75.75 0 0 1 .75.75v2.25a.75.75 0 0 1-1.5 0V3a.75.75 0 0 1 .75-.75ZM7.5 12a4.5 4.5 0 1 1 9 0 4.5 4.5 0 0 1-9 0ZM18.894 6.12a.75.75 0 0 0-1.06-.94l-1.42 1.42a.75.75 0 1 0 1.06 1.06l1.42-1.42Zm-11.394 9.64a.75.75 0 0 0-1.06 1.06l1.42 1.42a.75.75 0 0 0 1.06-1.06l-1.42-1.42ZM4.5 12a.75.75 0 0 1 .75-.75h2.25a.75.75 0 0 1 0 1.5H5.25A.75.75 0 0 1 4.5 12ZM14.04 18.894a.75.75 0 0 0-.94-1.06l-1.42 1.42a.75.75 0 1 0 1.06 1.06l1.42-1.42Zm-6.094-11.394a.75.75 0 0 0-1.06-1.06L5.22 7.22a.75.75 0 0 0 1.06 1.06l1.42-1.42ZM12 15a3 3 0 1 0 0-6 3 3 0 0 0 0 6Zm3.75 7.5a.75.75 0 0 1-.75-.75v-2.25a.75.75 0 0 1 1.5 0v2.25a.75.75 0 0 1-.75.75ZM18.894 17.88a.75.75 0 0 0 1.06-1.06l-1.42-1.42a.75.75 0 1 0-1.06 1.06l1.42 1.42Zm-11.394 0a.75.75 0 0 0 1.06 1.06l1.42-1.42a.75.75 0 0 0-1.06-1.06l-1.42 1.42ZM21 12a.75.75 0 0 1-.75.75h-2.25a.75.75 0 0 1 0-1.5h2.25a.75.75 0 0 1 .75.75Z" />
                                    </svg>
                                ) : (
                                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" className="w-6 h-6 text-orange-500">
                                        <path fillRule="evenodd" d="M9.544 19.57a.75.75 0 0 1-.913.344C6.476 18.49 4.5 15.657 4.5 12a7.5 7.5 0 0 1 15-3.375c.092.152.176.324.255.51a.75.75 0 0 1-.861.942 6.002 6.002 0 0 0-4.686-2.585A6.75 6.75 0 0 0 9.47 16.357a.75.75 0 0 1-.926.343Zm3.829 7.429a30.214 30.214 0 0 1-.72 2.659 12.016 12.016 0 0 0 6.64-16.147A.75.75 0 0 1 18 2.25a.75.75 0 0 1 1.025.228 12.018 12.018 0 0 1 3.518 14.809.75.75 0 0 1-.582 1.139.75.75 0 0 1-.228.025Z" clipRule="evenodd" />
                                    </svg>
                                )}
                            </button>
                        </div>
                        <main className="flex-grow pt-8 pb-20 overflow-auto">
                            {renderContent()}
                        </main>
                        <nav className={`fixed bottom-0 left-0 right-0 max-w-lg mx-auto w-full backdrop-blur-lg border-t border-gray-700/50 shadow-lg z-20`}>
                            <ul className="flex justify-around items-center p-2" style={{ backgroundColor: isDarkMode ? primary : secondary }}>
                                <li className="flex-1 text-center flex flex-col items-center">
                                    <button onClick={() => setActiveTab('home')} className={`w-full p-2 rounded-lg transition-colors duration-200 focus:outline-none ${activeTab === 'home' ? 'text-orange-400' : 'text-gray-300'}`}>
                                        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" strokeWidth={1.5} stroke="currentColor" className="w-6 h-6 mx-auto mb-1">
                                            <path strokeLinecap="round" strokeLinejoin="round" d="m2.25 12 8.954-8.955c.44-.439 1.152-.439 1.591 0L21.75 12M4.5 9.75v10.125c0 .621.504 1.125 1.125 1.125h9.75a1.125 1.125 0 0 0 1.125-1.125V9.75M8.25 21h8.25" />
                                        </svg>
                                        <span className="text-xs font-medium">Home</span>
                                    </button>
                                </li>
                                <li className="flex-1 text-center flex flex-col items-center">
                                    <button onClick={() => setActiveTab('events')} className={`w-full p-2 rounded-lg transition-colors duration-200 focus:outline-none ${activeTab === 'events' ? 'text-orange-400' : 'text-gray-300'}`}>
                                        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" strokeWidth={1.5} stroke="currentColor" className="w-6 h-6 mx-auto mb-1">
                                            <path strokeLinecap="round" strokeLinejoin="round" d="M6.75 3v2.25M17.25 3v2.25M3 18.75V7.5a2.25 2.25 0 0 1 2.25-2.25h13.5A2.25 2.25 0 0 1 21 7.5v11.25m-18 0A2.25 2.25 0 0 0 5.25 21h13.5A2.25 2.25 0 0 0 21 18.75m-18 0v-7.5" />
                                        </svg>
                                        <span className="text-xs font-medium">Events</span>
                                    </button>
                                </li>
                                <li className="flex-1 text-center flex flex-col items-center">
                                    <button onClick={() => setActiveTab('promo')} className={`w-full p-2 rounded-lg transition-colors duration-200 focus:outline-none ${activeTab === 'promo' ? 'text-orange-400' : 'text-gray-300'}`}>
                                        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" strokeWidth={1.5} stroke="currentColor" className="w-6 h-6 mx-auto mb-1">
                                            <path strokeLinecap="round" strokeLinejoin="round" d="M9 3.75H6.75a1.5 1.5 0 0 0-1.5 1.5v1.5c0 .414.336.75.75.75h2.25a.75.75 0 0 1 .75.75v7.5a.75.75 0 0 1-.75.75H5.25a.75.75 0 0 0-.75.75v1.5a1.5 1.5 0 0 0 1.5 1.5h2.25a.75.75 0 0 0 .75-.75v-1.5a.75.75 0 0 1 .75-.75h2.25a.75.75 0 0 0 .75-.75v-7.5a.75.75 0 0 0-.75-.75h-2.25a.75.75 0 0 1-.75-.75v-1.5A1.5 1.5 0 0 0 9 3.75Z" />
                                        </svg>
                                        <span className="text-xs font-medium">Promos</span>
                                    </button>
                                </li>
                                <li className="flex-1 text-center flex flex-col items-center">
                                    <button onClick={() => setActiveTab('chatbot')} className={`w-full p-2 rounded-lg transition-colors duration-200 focus:outline-none ${activeTab === 'chatbot' ? 'text-orange-400' : 'text-gray-300'}`}>
                                        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" strokeWidth={1.5} stroke="currentColor" className="w-6 h-6 mx-auto mb-1">
                                            <path strokeLinecap="round" strokeLinejoin="round" d="M8.625 9.75a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0Zm0 3.75a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0Zm0 3.75a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0ZM12 13.5a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0Zm0 3.75a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0Zm0-7.5a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0Zm3.75 7.5a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0Zm0 3.75a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0Zm0-7.5a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0Z" />
                                            <path strokeLinecap="round" strokeLinejoin="round" d="M16.862 18.251a12.105 12.105 0 0 1-4.141 1.403c-2.88.424-5.722-.491-8.114-1.291a12.358 12.358 0 0 1-2.099-1.39M3.75 7.005c-1.57.284-3.13.568-4.73 1.39" />
                                            <path strokeLinecap="round" strokeLinejoin="round" d="m14.25 18.82-3.8-3.8a1.5 1.5 0 0 1-.447-1.06V7.5h8.25a.75.75 0 0 1 .75.75v8.25a.75.75 0 0 1-.75.75h-2.25v-1.5" />
                                        </svg>
                                        <span className="text-xs font-medium">Chatbot</span>
                                    </button>
                                </li>
                                <li className="flex-1 text-center flex flex-col items-center">
                                    <button onClick={() => setActiveTab('contact')} className={`w-full p-2 rounded-lg transition-colors duration-200 focus:outline-none ${activeTab === 'contact' ? 'text-orange-400' : 'text-gray-300'}`}>
                                        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" strokeWidth={1.5} stroke="currentColor" className="w-6 h-6 mx-auto mb-1">
                                            <path strokeLinecap="round" strokeLinejoin="round" d="M21.75 6.75v10.5a2.25 2.25 0 0 1-2.25 2.25h-15a2.25 2.25 0 0 1-2.25-2.25V6.75m19.5 0A2.25 2.25 0 0 0 19.5 4.5h-15a2.25 2.25 0 0 0-2.25 2.25m19.5 0v.243a2.25 2.25 0 0 1-1.07 1.916l-7.5 4.615a2.25 2.25 0 0 1-2.36 0L3.32 8.91a2.25 2.25 0 0 1-1.07-1.916V6.75" />
                                        </svg>
                                        <span className="text-xs font-medium">Contact</span>
                                    </button>
                                </li>
                            </ul>
                        </nav>
                    </div>
                </div>
            );
        };

        ReactDOM.createRoot(rootElement).render(
            <React.StrictMode>
                <App />
            </React.StrictMode>
        );
    </script>
</body>
</html>
